<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modaura | New York Boutique</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Poppins:wght@300;400;500&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Poppins', sans-serif; }
        .font-serif { font-family: 'Playfair Display', serif; }
        .admin-only { display: none; }
    </style>
</head>
<body class="bg-[#fafafa]">

    <nav class="bg-white/90 backdrop-blur-md sticky top-0 z-50 shadow-sm p-4 px-8 flex justify-between items-center border-b border-gray-100">
        <h1 class="text-3xl font-serif tracking-[0.2em] text-black">MODAURA</h1>
        <div class="flex items-center gap-4">
            <button id="adminBtn" onclick="toggleAdmin()" class="text-[10px] uppercase tracking-widest text-gray-400 hover:text-black transition">Staff Login</button>
            <button id="logoutBtn" onclick="logout()" class="hidden text-red-500 text-xs uppercase tracking-widest font-bold">Logout</button>
        </div>
    </nav>

    <div id="adminPanel" class="admin-only max-w-2xl mx-auto mt-8 p-8 bg-white rounded-none shadow-2xl border-t-4 border-black">
        <h2 class="text-xl font-serif mb-6 text-gray-800 uppercase tracking-widest">Inventory Management</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <input type="text" id="dressName" placeholder="Product Name (e.g. Silk Evening Gown)" class="w-full p-3 border-b border-gray-200 focus:border-black outline-none transition">
            <input type="number" id="dressPrice" placeholder="Price in USD ($)" class="w-full p-3 border-b border-gray-200 focus:border-black outline-none transition">
            <input type="text" id="dressImage" placeholder="Image URL (High Quality Link)" class="w-full p-3 border-b border-gray-200 focus:border-black outline-none md:col-span-2">
            <button onclick="saveDress()" class="md:col-span-2 bg-black text-white p-4 uppercase tracking-[0.2em] text-sm hover:bg-gray-800 transition transform active:scale-95">Upload Collection</button>
        </div>
    </div>

    <header class="text-center py-16">
        <p class="text-xs uppercase tracking-[0.3em] text-gray-500 mb-2">New York • Paris • Milan</p>
        <h2 class="text-5xl font-serif text-black mb-4 italic">The Winter Collection</h2>
        <div class="w-12 h-[1px] bg-black mx-auto"></div>
    </header>

    <main class="max-w-7xl mx-auto px-6 pb-24">
        <div id="productGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-10">
            <p class="text-center col-span-full text-gray-400 font-light tracking-widest">CURATING COLLECTION...</p>
        </div>
    </main>

    <script>
        const PASS = "rafay1259";
        let isAdmin = false;

        function toggleAdmin() {
            const entry = prompt("Enter Access Key:");
            if (entry === PASS) {
                isAdmin = true;
                document.getElementById('adminPanel').style.display = 'block';
                document.getElementById('adminBtn').classList.add('hidden');
                document.getElementById('logoutBtn').classList.remove('hidden');
                loadDresses();
            } else {
                alert("Access Denied.");
            }
        }

        function logout() {
            isAdmin = false;
            document.getElementById('adminPanel').style.display = 'none';
            document.getElementById('adminBtn').classList.remove('hidden');
            document.getElementById('logoutBtn').classList.add('hidden');
            loadDresses();
        }

        async function saveDress() {
            const name = document.getElementById('dressName').value;
            const price = document.getElementById('dressPrice').value;
            const image = document.getElementById('dressImage').value;

            if(!name || !price || !image) return alert("All fields are mandatory.");

            const res = await fetch('/api/save', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({ name, price, image, id: Date.now() })
            });

            if(res.ok) {
                alert("Listing Published Successfully.");
                document.querySelectorAll('input').forEach(i => i.value = '');
                loadDresses();
            }
        }

        async function loadDresses() {
            const res = await fetch('/api/get-dresses');
            const data = await res.json();
            const grid = document.getElementById('productGrid');
            
            if(!data || data.length === 0) {
                grid.innerHTML = '<p class="col-span-full text-center text-gray-400 py-10 tracking-widest">COLLECTION COMING SOON</p>';
                return;
            }

            grid.innerHTML = data.map(item => `
                <div class="group cursor-pointer">
                    <div class="relative overflow-hidden bg-gray-100 aspect-[3/4]">
                        <img src="${item.image}" class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110" onerror="this.src='https://images.unsplash.com/photo-1539109136881-3be0616acf4b?q=80&w=500&auto=format&fit=crop'">
                        <div class="absolute inset-0 bg-black/0 group-hover:bg-black/5 transition-colors"></div>
                    </div>
                    <div class="mt-4 flex justify-between items-start">
                        <div>
                            <h3 class="text-sm font-medium text-gray-900 uppercase tracking-wider">${item.name}</h3>
                            <p class="text-xs text-gray-500 mt-1 uppercase">Limited Edition</p>
                        </div>
                        <p class="text-sm font-bold text-black">$${parseFloat(item.price).toFixed(2)}</p>
                    </div>
                    <button class="mt-4 w-full bg-transparent border border-black text-black py-2 text-xs uppercase tracking-widest hover:bg-black hover:text-white transition-all duration-300">Shop Now</button>
                </div>
            `).reverse().join('');
        }

        loadDresses();
    </script>
</body>
                                                       </html>
