<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modaura Admin & Shop</title>
    <style>
        body { font-family: sans-serif; background: #fff5f8; text-align: center; padding: 20px; }
        .card { background: white; padding: 25px; border-radius: 20px; box-shadow: 0 10px 20px rgba(0,0,0,0.1); max-width: 400px; margin: auto; }
        input, textarea { width: 90%; margin: 10px 0; padding: 12px; border: 2px solid #ffb6c1; border-radius: 10px; }
        button { background: #ff69b4; color: white; border: none; padding: 15px; border-radius: 10px; width: 100%; cursor: pointer; font-weight: bold; }
        #gallery { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 40px; padding: 20px; }
        .dress-card { background: white; padding: 15px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .dress-card img { width: 100%; border-radius: 10px; height: 300px; object-fit: cover; }
        .buy-btn { background: #000; color: #fff; text-decoration: none; display: block; padding: 10px; margin-top: 10px; border-radius: 5px; }
    </style>
</head>
<body>
    <div class="card">
        <h1 style="color: #ff69b4;">MODAURA</h1>
        <p>Save dress to Neon Database</p>
        <form id="dressForm">
            <input type="text" id="name" placeholder="Dress Name" required>
            <textarea id="desc" placeholder="Description" rows="3"></textarea>
            <input type="text" id="url" placeholder="Image URL" required>
            <button type="submit" id="btn">Upload Dress</button>
        </form>
    </div>

    <h2 style="margin-top: 50px; color: #ff69b4;">Our Collection</h2>
    <div id="gallery">Loading dresses...</div>

    <script>
        // 1. Save Dress Logic
        document.getElementById('dressForm').onsubmit = async (e) => {
            e.preventDefault();
            const btn = document.getElementById('btn');
            btn.innerText = "Saving...";
            const data = {
                name: document.getElementById('name').value,
                desc: document.getElementById('desc').value,
                url: document.getElementById('url').value
            };
            try {
                const res = await fetch('/api/save', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });
                if (res.ok) { 
                    alert("Mubarak ho! Data save ho gaya.");
                    location.reload(); // Page refresh taake naye dress nazar aaye
                }
            } catch (err) { alert("Error!"); }
            btn.innerText = "Upload Dress";
        };

        // 2. Display Dresses Logic
        async function loadDresses() {
            try {
                const res = await fetch('/api/get-dresses'); // Ye endpoint aap ke backend par hona chahiye
                const dresses = await res.json();
                const gallery = document.getElementById('gallery');
                gallery.innerHTML = dresses.map(d => `
                    <div class="dress-card">
                        <img src="${d.url}" alt="${d.name}">
                        <h3>${d.name}</h3>
                        <p>${d.desc}</p>
                        <a href="https://modaura.vercel.app" class="buy-btn">View Details</a>
                    </div>
                `).join('');
            } catch (err) {
                document.getElementById('gallery').innerText = "Abhi koi dress nahi hai.";
            }
        }
        loadDresses();
    </script>
</body>
</html>
