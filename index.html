<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modaura Luxe | NYC</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@1,600&family=Montserrat:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Montserrat', sans-serif; background-color: #fdfaf7; }
        .font-serif { font-family: 'Cormorant Garamond', serif; }
        .admin-only { display: none; }
        .glass { background: rgba(255, 255, 255, 0.7); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.3); }
    </style>
</head>
<body>

    <nav class="glass sticky top-0 z-50 p-5 px-8 flex justify-between items-center shadow-sm">
        <h1 class="text-2xl font-serif italic tracking-widest text-[#4a4a4a]">Modaura</h1>
        <button id="adminBtn" onclick="toggleAdmin()" class="text-[10px] tracking-[3px] text-pink-300 hover:text-pink-500 uppercase transition">Studio Access</button>
        <button id="logoutBtn" onclick="logout()" class="hidden text-xs text-gray-400 underline">Close Studio</button>
    </nav>

    <div id="adminPanel" class="admin-only max-w-xl mx-auto mt-8 p-8 glass rounded-[30px] shadow-xl">
        <h2 class="text-sm tracking-widest text-gray-400 uppercase mb-6 text-center">Update Boutique</h2>
        <div class="space-y-4">
            <input type="text" id="dressName" placeholder="Dress Title" class="w-full p-4 bg-white/50 border-none rounded-2xl outline-none focus:ring-1 focus:ring-pink-200">
            <input type="number" id="dressPrice" placeholder="Price ($)" class="w-full p-4 bg-white/50 border-none rounded-2xl outline-none focus:ring-1 focus:ring-pink-200">
            <input type="text" id="dressImage" placeholder="Image URL" class="w-full p-4 bg-white/50 border-none rounded-2xl outline-none focus:ring-1 focus:ring-pink-200">
            <button onclick="saveDress()" class="w-full bg-[#fce4ec] text-[#d81b60] p-4 rounded-2xl font-semibold uppercase text-[10px] tracking-widest hover:bg-[#f8bbd0] transition">Publish to Gallery</button>
        </div>
    </div>

    <header class="text-center py-24 px-6">
        <span class="text-[10px] tracking-[4px] text-pink-300 uppercase mb-4 block">New York Boutique</span>
        <h2 class="text-6xl font-serif italic text-[#4a4a4a] leading-tight">Glow in Every<br>Gown.</h2>
        <p class="text-gray-400 text-xs mt-6 tracking-widest uppercase font-light">The Everlasting Edit</p>
    </header>

    <main class="max-w-7xl mx-auto px-8 pb-32">
        <div id="productGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-12">
            <p class="col-span-full text-center text-gray-300 text-xs italic tracking-widest py-20">Gathering the magic...</p>
        </div>
    </main>

    <script>
        const PASS = "rafay1259";
        let isAdmin = false;

        function toggleAdmin() {
            const entry = prompt("Secret Key:");
            if (entry === PASS) {
                isAdmin = true;
                document.getElementById('adminPanel').style.display = 'block';
                document.getElementById('adminBtn').classList.add('hidden');
                document.getElementById('logoutBtn').classList.remove('hidden');
                loadDresses();
            } else {
                alert("Incorrect key.");
            }
        }

        function logout() {
            isAdmin = false;
            document.getElementById('adminPanel').style.display = 'none';
            document.getElementById('adminBtn').classList.remove('hidden');
            document.getElementById('logoutBtn').classList.add('hidden');
            loadDresses();
        }

        async function saveDress() {
            const name = document.getElementById('dressName').value;
            const price = document.getElementById('dressPrice').value;
            const image = document.getElementById('dressImage').value;

            if(!name || !price || !image) return alert("Fill all details!");

            const res = await fetch('/api/save', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({ name, price, image, id: Date.now() })
            });

            if(res.ok) {
                alert("Dress Added!");
                document.querySelectorAll('input').forEach(i => i.value = '');
                loadDresses();
            }
        }

        async function loadDresses() {
            const res = await fetch('/api/get-dresses');
            const data = await res.json();
            const grid = document.getElementById('productGrid');
            
            if(!data || data.length === 0) {
                grid.innerHTML = '<p class="col-span-full text-center text-gray-300 py-20 text-[10px] tracking-[5px]">COMING SOON</p>';
                return;
            }

            grid.innerHTML = data.map(item => `
                <div class="group cursor-pointer">
                    <div class="relative overflow-hidden rounded-[40px] shadow-sm bg-white p-2">
                        <img src="${item.image}" class="w-full h-[450px] object-cover rounded-[35px] transition-transform duration-1000 group-hover:scale-105" onerror="this.src='https://images.unsplash.com/photo-1566174053879-31528523f8ae?q=80&w=500&auto=format&fit=crop'">
                    </div>
                    <div class="mt-8 text-center px-4">
                        <h3 class="text-xs font-semibold text-gray-700 uppercase tracking-widest">${item.name}</h3>
                        <p class="text-lg font-serif italic text-pink-400 mt-2">$${parseFloat(item.price).toFixed(2)}</p>
                        <button class="mt-5 w-full bg-white border border-pink-50 text-pink-300 py-3 rounded-2xl text-[9px] uppercase tracking-[3px] hover:bg-pink-50 hover:text-pink-500 transition-all">Select Dress</button>
                    </div>
                </div>
            `).reverse().join('');
        }

        loadDresses();
    </script>
</body>
        </html>
